version: "3.7"
services:
  transmission:
    image: linuxserver/transmission
    volumes:
      - ./transmission/config:/config
      - ./transmission/downloads:/downloads
      - ./transmission/watch:/watch
    ports:
      # Do not expose port 9091; will proxy it via http.
      - 51413:51413
      - 51413:51413/udp
    environment:
      - USER=admin
      - PASS=pass

  http:
    image: abiosoft/caddy:1.0.3-no-stats
    volumes:
      # /srv is default sites root from caddy container.
      # We want to directly mount downloads/ because it might be a symlink.
      - ./transmission/downloads:/srv/downloads
      - ./http/Caddyfile:/etc/Caddyfile
    ports:
      - 2095:2095
